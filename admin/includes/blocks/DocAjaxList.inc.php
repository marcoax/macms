<?php   $objDocList=new documenti();   $objDocList->getMediaList($Id,'documenti'.$sufixImage);   if($isRemote==1)$objDocList->Order="dv.Doc";   else $objDocList->Order="IdDocumento DESC";   $objDocList->getData();   if($objDocList->Data){   	  $curStato='';     	  $docList.="<ul class=\"simpleDocList\">";      foreach($objDocList->Data as $d){      	 $title=($d->Title)?$d->Title:$d->Doc;	       	 $title=stripslashes($title);		 $listClass=($listClass=='odd')?'even':'odd';           	 $docList.="<li id=\"item_".$objDocList->tablename."_".$d->IdDocumento."\" class=\"".$listClass."\">\n";	       	  	 if($d->Sort)$docList.=$d->Sort." - ";	       	  	 $textId="item_".$objDocList->tablename."_".$d->IdDocumento."_text"; 			    	       	  $pathMedia=documenti::pathHandler('doc',$d->IdAzione); 	       	  	 //$docList.= ma_helper_view_image_link($d->Doc,'img','red','small_');            	  	 //$docList.="<img src=\"".$pathMedia."thumb_".$d->Doc."\" alt=\"".$title."\" border=\"0\" class=\"thumbnail\">\n";	       	  	 if($isRemote==1000){      	  	 		   $docList.=" - ";             	  	 		   $docList.= ma_helper_view_link('documenti',$Id_sub,$d->IdDocumento,'sotto',MSG_HELP_SCHEDA_FILE,'&IdAzione='.$Id)." - ";      	  	 		   $docList.="<a href=\"#\" onclick=\"setStatus('setStatus','docListBody','".$d->IdDocumento."','".$IdStato."')\"       	  	 		   class=\"sotto\">".$labelAction."</a>\n";     		}    		$pathUrl=FILENAME_EDIT_MODAL.".php?mode=edit&amp;Id_sez=documenti&amp;Id_sub=".$d->IdCategory."&amp;modal=1&amp;Id=".$d->IdDocumento;			$pathUrl=FILENAME_EDIT.".php?mode=edit&amp;Id_sez=documenti&amp;Id_sub=".$d->IdCategory."&amp;&amp;Id=".$d->IdDocumento;	 		$docList.="<div id=\"".$textId."_details\" class=\"pull-right comandi\">";			$docList.='<div class="btn-group">';     		$docList.="<a rel=\"tooltip\" href=\"".$pathUrl."\" data-toggle=\"modals\" class=\"btn btn-small\" data-original-title=\"Edit ".$title." \" data-placement=\"bottom\"> <i class=\"icon-pencil\"></i></a>\n";          		$docList.="<a rel=\"tooltip\"   href=\"".$pathMedia.$d->Doc."\"  target=\"_new\" class=\"btn btn-small\" title=\"View ".$title."\" data-original-title=\"View Document \" data-placement=\"bottom\"> <i class=\"icon-download-alt\"></i> </a>\n";          		$docList.="<a rel=\"tooltip\" href=\"#\" class=\"btn btn-small\" onclick=\"deleteItem(this);return false\" id=\"delete_".$objDocList->tablename."_".$d->IdDocumento."\" data-original-title=\"Delete ".$title." \" data-placement=\"bottom\"><i class=\"icon-trash\"></i> </a></div>\n";          		$docList.='</div>';						     		$docList.="<div id=\"".$textId."\" class=\"fcomandi pull-left\">".trim($title)."  ".profiliToButton($d)."</div>";			//$docList.="<div id=\"".$textId."\" class=\"fcomandi pull-left\">".profiliToButton($d)."</div>";     $docList.="</li>\n";     $curStato=$d->Stato;     	}    $docList.="</ul>";  }else {	$docList.="<ul class=\"simpleDocList\">";	$docList.="<li>".MSG_NO_DOC."</li>";	$docList.="</ul>";  }function profiliToButton($data){		$IdProfilo=($data->IdProfilo!='')?explode(',',$data->IdProfilo):'';	$dObjProfilo=dominio::getListPermission();      $docList.='<div class="btn-group" data-toggle="buttons-checkbox">';	 if($dObjProfilo->Data){	 	      foreach($dObjProfilo->Data as $d){	 	      	 $active=(is_array($IdProfilo) && in_array($d->b,$IdProfilo))?' active':'';				   $activeMsg=(is_array($IdProfilo) && in_array($d->b,$IdProfilo))?MSG_UNSET_PERMISSION:MSG_SET_PERMISSION;                 $docList.='<button rel="tooltip" class="btn  btn-mini '.$active.'" data-original-title="'.$activeMsg.'" data-placement="bottom" data-set-title="'.MSG_SET_PERMISSION.'" data-unset-title="'.MSG_UNSET_PERMISSION.'" onclick="updateItemToSet(\'documenti_IdProfilo_'.$data->IdDocumento.'_'.$d->b.'\',this);return false">'.$d->b.'</button>';		       }                	 }      $docList.='</div>'; return	$docList;		  }			  ?>