<?php  global $objSez;  $curTime = ma_round_time();  $this->data=($this->data)?$this->data:$curTime.':00';  $b = date('d M Y - H:i', 132123600);  //echo$b;  $date = new DateTime('10-03-1974 '.$this->data);  //echo $date->getTimestamp();  $timezone_abbreviations = DateTimeZone::listAbbreviations();//print_r($timezone_abbreviations);  $objSez->Data->Timezone =($objSez->Data->Timezone)?$objSez->Data->Timezone:$_SESSION['Timezone'];   $listIdentifiers=DateTimeZone::listIdentifiers();  $myDateTime = new DateTime($objSez->Data->DateStart.' '.$this->data, new DateTimeZone('GMT'));  $myDateTime->setTimezone(new DateTimeZone($objSez->Data->Timezone));  $myDateTime->format('Y-m-d H:i');        $timeHtm='';  $options = array();   if($this->valore['oraType']=='full')$min30=array('00');  else $min30=array('00','30');  foreach (range(0,23) as $fullhour) {        $parthour = $fullhour > 12 ? $fullhour - 12 : $fullhour;		//echo $fullhour.":".$int."<br>";        foreach($min30 as $int){      			$selected=($this->data==$fullhour.":".$int.":00")?"selected":"";				if($selected=='')$selected=($this->data=='0'.$fullhour.":".$int.":00")?"selected":"";			 //echo $fullhour.":".$int."<br>";            if($fullhour > 11){                $options[$fullhour.".".$int]=$parthour.":".$int." PM";				$timeHtm.="<option value='".$fullhour.":".$int."' $selected>".$parthour.":".$int." PM</option>\n";            }else{                if($fullhour == 0){$parthour='12';}                $options[$fullhour.".".$int]=$parthour.":".$int." AM" ;				$timeHtm.="<option value='".$fullhour.":".$int."' $selected>".$fullhour.":".$int." AM</option>\n";            }        }   }?><div class="control-group form-align">	<label><?php echo  $this->valore['label']?></label>   <?php if($this->valore['hideOra']!=1):?>   <select name="<?php echo  $mainTab?>.<?php echo  $this->formElement?><?php if($this->valore['multiple']):?>[]<?php endif?>"              id="<?php echo  $mainTab?>.<?php echo  $this->formElement?>"           style="width:<?php echo  $this->valore['size']?>px; 		   <?php if($this->valore['multiple']):?>height:<?php echo  $this->valore['h']?>px <?php endif?>"		   <?php if($this->valore['multiple']):?>multiple="<?php echo  $this->valore['multiple']?>"<?php endif?>>           <?php if($this->valore['hideSelectNull']!=1):?><option value=''><?php echo MSG_SELECT?></option><?php endif?>           <?php echo  $timeHtm?>    </select>    <?php endif?>     <select id="<?php echo  $mainTab?>.Timezone" name="<?php echo  $mainTab?>.Timezone">	<?php	$timezone_identifiers = DateTimeZone::listIdentifiers();	foreach( $timezone_identifiers as $value ){	    if ( preg_match( '/^(America|Antartica|Arctic|Asia|Atlantic|Europe|Indian|Pacific)\//', $value ) ){	    	$ex=explode("/",$value);//obtain continent,city		    	if($value==$objSez->Data->Timezone) echo "dd";	    	$selectedTime=(str_replace("/","",$value)==str_replace("/","",$objSez->Data->Timezone))?"selected":"";	    	if ($continent!=$ex[0]){	    		if ($continent!="") echo '</optgroup>';	    		echo '<optgroup label="'.$ex[0].'">';	    	} 	    	$city=$ex[1];	    	$continent=$ex[0];	    	echo '<option value="'.$value.'" '.$selectedTime.'>'.$value.'</option>';	    			    }	}	?>		</optgroup>	</select>    </div>s